import { Meta, Story, Canvas } from "@storybook/addon-docs/blocks";
import { PressEditor } from ".";

<Meta title="PressEditor" component={PressEditor} />

# PressEditor

The `PressEditor` component is Lumastic's implementations of the [ProseMirror](https://prosemirror.net/docs/guide/) editor:

<Story name="Basic">
  <PressEditor
    debug
    onChange={(state) => localStorage.setItem("editor", JSON.stringify(state))}
  />
</Story>

## Passing a `defaultValue`

The `PressEditor` can take a `defaultValue` prop.

<Story name="defaultValue">
  <PressEditor
    debug
    defaultValue={{
      type: "doc",
      content: [
        {
          type: "paragraph",
          content: [
            {
              type: "text",
              text: "Henlo"
            }
          ]
        }
      ]
    }}
  />
</Story>

## Heading example

<Story name="Heading">
  <PressEditor
    debug
    defaultValue={{
      type: "doc",
      content: [
        {
          type: "heading",
          attrs: {
            level: 1
          },
          content: [
            {
              type: "text",
              text: "Henlo"
            }
          ]
        }
      ]
    }}
  />
</Story>

## Example custom `ReactNodeView` block node

Each `PressComponent` is given a `setAttrs` prop that allows it to control its attributes and state independently of the document.

<Story name="setAttrs">
  <PressEditor
    debug
    defaultValue={{
      type: "doc",
      content: [
        {
          type: "count"
        }
      ]
    }}
  />
</Story>

## `link_node`

Each `PressComponent` is given a `setAttrs` prop that allows it to control its attributes and state independently of the document.

<Story name="link_node">
  <PressEditor
    debug
    defaultValue={{
      type: "doc",
      content: [
        {
          type: "paragraph"
        },
        {
          type: "link_node",
          attrs: {
            url: "https://join.lumastic.com/stories/surfing"
          }
        }
      ]
    }}
  />
</Story>

## MenuBar

<Story name="menuBar">
  <PressEditor menuBar />
</Story>

## FloatingMenu

<Story name="floatingMenu">
  <PressEditor floatingMenu />
</Story>

## `readOnly`

Rather than having a `PressRenderer` component, `PressEditor` has a `readOnly` prop that makes it uneditable.

<Story name="readOnly">
  <PressEditor
    readOnly
    defaultValue={{
      type: "doc",
      content: [
        {
          type: "heading",
          attrs: {
            level: 1
          },
          content: [
            {
              type: "text",
              text: "Heading"
            }
          ]
        },
        {
          type: "paragraph",
          content: [
            {
              type: "text",
              text:
                "Hello everyone and welcome to this text that I am writing as an example paragraph"
            }
          ]
        },
        {
          type: "link_node",
          attrs: {
            url: "https://join.lumastic.com/stories/surfing"
          }
        }
      ]
    }}
  />
</Story>
